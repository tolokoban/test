(()=>{"use strict";var e,n={664:(e,n,r)=>{r.d(n,{Z:()=>s});var t=r(81),o=r.n(t),a=r(645),i=r.n(a)()(o());i.push([e.id,".ohc25CXjSMpTDdYBN7a4 {\n    position: absolute;\n    display: grid;\n    grid-template-columns: auto 1fr 1fr;\n    grid-template-rows: 1fr 1fr;\n    gap: 0.5em;\n    padding: 0.5em;\n    place-items: stretch;\n    width: 100%;\n    height: calc(100% - 1em);\n}\n\n.ohc25CXjSMpTDdYBN7a4 > .AMyjp_oeRdP2VdJ04p6b {\n    grid-column: 1/2;\n    border-radius: 0.5em;\n    --size: calc(50vh - 1.25em);\n    width: var(--size);\n    height: var(--size);\n}\n\n.ohc25CXjSMpTDdYBN7a4 > .qJuKO5QZC1nTuwpQKXE0 {\n    grid-column: 2/3;\n    grid-row: 1/3;\n    background-color: var(--theme-color-neutral-dark-5);\n    border-radius: 0.5em;\n    width: 100%;\n    padding: 1em;\n    overflow: auto;\n}\n",""]),i.locals={App:"ohc25CXjSMpTDdYBN7a4",canvas:"AMyjp_oeRdP2VdJ04p6b",editor:"qJuKO5QZC1nTuwpQKXE0"};const s=i},755:(e,n,r)=>{r.d(n,{Z:()=>s});var t=r(81),o=r.n(t),a=r(645),i=r.n(a)()(o());i.push([e.id,"._67kXv6EYPi2lnNUF6SJQ {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: stretch;\n    gap: 0.5em;\n    box-shadow: 0 -0.125em 0.25em #f907;\n}\n\n._67kXv6EYPi2lnNUF6SJQ > header {\n    flex: 0 0 auto;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 1em;\n    height: 2em;\n}\n\n._67kXv6EYPi2lnNUF6SJQ > textarea {\n    flex: 1 1 auto;\n    padding: 0.5em;\n    border: none;\n    font-family: monospace;\n    font-size: 1rem;\n    background-color: #999;\n}\n",""]),i.locals={Editor:"_67kXv6EYPi2lnNUF6SJQ"};const s=i},6:(e,n,r)=>{r.d(n,{Z:()=>s});var t=r(81),o=r.n(t),a=r(645),i=r.n(a)()(o());i.push([e.id,".nn3He8M4QNiyfh0A4Fk6 {\n    position: relative;\n    grid-column: 3/4;\n    grid-row: 1/3;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    color: #fffe;\n    font-family: sans-serif;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: stretch;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 > header {\n    flex: 0 0 auto;\n    padding: 0 0.5em;\n    display: flex;\n    justify-content: flex-start;\n    align-items: stretch;\n    z-index: 1;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 > header > button {\n    all: inherit;\n    display: grid;\n    place-items: center;\n    padding: 0 1em;\n    height: 2.5rem;\n    font-variant: small-caps;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 > header > button:disabled {\n    background-color: var(--theme-color-neutral-dark);\n    border-radius: 0.5em.5em 0 0;\n    box-shadow: 0 0.125em 0.25em #f907 inset;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 > main {\n    z-index: 0;\n    flex: 1 1 auto;\n    overflow: auto;\n    padding: 1em;\n    background-color: var(--theme-color-neutral-dark-5);\n    border-radius: 0.5em;\n    box-shadow: 0 -0.125em 0.25em #f907;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 h1,\n.nn3He8M4QNiyfh0A4Fk6 h2,\n.nn3He8M4QNiyfh0A4Fk6 h3 {\n    border: 0.0625em solid currentColor;\n    border-image: linear-gradient(to right, currentColor, transparent) 0 0 1 0;\n    margin: 0.5rem 0 1rem 0;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 h1 {\n    font-size: 1.2rem;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 h2 {\n    font-size: 1.1rem;\n}\n\n.nn3He8M4QNiyfh0A4Fk6 hr {\n    border: none;\n    height: 1px;\n    width: 100%;\n    margin: 1rem 0;\n    background-image: linear-gradient(\n        to left,\n        transparent,\n        currentColor,\n        currentColor,\n        transparent\n    );\n}\n\n.nn3He8M4QNiyfh0A4Fk6 code {\n    font-family: monospace;\n    color: #c80;\n}\n\n.M8gn1JspyFVVkxq8ibIe {\n    white-space: pre-wrap;\n    padding: 0.5em;\n    box-shadow: 0 0.125em 0.25em var(--theme-color-neutral-dark) 77;\n    background: #003064;\n    border-radius: 0.5em;\n    margin: 1em;\n    font-family: monospace;\n    transition: all 0.3s;\n    cursor: pointer;\n}\n\n.M8gn1JspyFVVkxq8ibIe:hover {\n    background: #331900;\n}\n",""]),i.locals={Exercices:"nn3He8M4QNiyfh0A4Fk6",Code:"M8gn1JspyFVVkxq8ibIe"};const s=i},173:(e,n,r)=>{r.d(n,{Z:()=>s});var t=r(81),o=r.n(t),a=r(645),i=r.n(a)()(o());i.push([e.id,".FtXHpoNWjp6dWWAt7C2t {\n    backdrop-filter: blur(4px);\n    background-color: #0006;\n    display: grid;\n    place-items: center;\n    font-size: 200%;\n    box-shadow: 0 0.5em 1em #fd79 inset;\n}\n",""]),i.locals={Loading:"FtXHpoNWjp6dWWAt7C2t"};const s=i},390:(e,n,r)=>{r.d(n,{Z:()=>d});var t=r(81),o=r.n(t),a=r(645),i=r.n(a),s=r(667),l=r.n(s),c=new URL(r(734),r.b),h=i()(o()),u=l()(c);h.push([e.id,".AdUtYyoKVmLvTQ4p2tnd {\n    position: relative;\n    border-radius: 0.5em;\n}\n\n.AdUtYyoKVmLvTQ4p2tnd > * {\n    position: absolute;\n    margin: 0;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 0.5rem;\n}\n\n.AdUtYyoKVmLvTQ4p2tnd > canvas {\n    transition: opacity 0.5s;\n}\n\n.TF_phfc1hgQ1ggsCbtWN {\n    background-color: #b10;\n    color: #fffe;\n    font-size: 80%;\n    padding: 0.5em;\n    overflow: auto;\n    background-image: url("+u+");\n    background-size: cover;\n}\n\n.TF_phfc1hgQ1ggsCbtWN .MqKID1WwavF6UOORFrIg {\n    display: grid;\n    grid-template-columns: auto 1fr;\n    place-items: center start;\n    gap: 0 1em;\n}\n\n.TF_phfc1hgQ1ggsCbtWN h1 {\n    font-size: 1rem;\n}\n\n.TF_phfc1hgQ1ggsCbtWN .MqKID1WwavF6UOORFrIg > div {\n    color: #fff9;\n    padding: 0 0.5em;\n}\n\n.TF_phfc1hgQ1ggsCbtWN .MqKID1WwavF6UOORFrIg > pre {\n    white-space: pre-wrap;\n    font-family: monospace;\n    margin: 0;\n}\n\n.TF_phfc1hgQ1ggsCbtWN .MqKID1WwavF6UOORFrIg > div.QvZvUFWf3edqehC6KcCX {\n    font-weight: bolder;\n    border-radius: 999vmax;\n    background-color: #0005;\n    color: #fff;\n}\n",""]),h.locals={Scene:"AdUtYyoKVmLvTQ4p2tnd",error:"TF_phfc1hgQ1ggsCbtWN",codeLines:"MqKID1WwavF6UOORFrIg",highlight:"QvZvUFWf3edqehC6KcCX"};const d=h},719:(e,n,r)=>{r.d(n,{Z:()=>s});var t=r(81),o=r.n(t),a=r(645),i=r.n(a)()(o());i.push([e.id,":root {\n    --theme-color-neutral-dark-5: #00193388;\n    --theme-color-neutral-dark: #001933;\n}\n\nhtml,\nbody {\n    margin: 0;\n    padding: 0;\n    color: #fffe;\n    font-family: sans-serif;\n    font-size: 18px;\n}\n\n* {\n    box-sizing: border-box;\n}\n\nbutton {\n    all: inherit;\n    background-image: linear-gradient(\n        to top,\n        hsl(40, 100%, 30%),\n        hsl(40, 100%, 45%),\n        hsl(40, 100%, 30%)\n    );\n    font-variant: small-caps;\n    border-radius: 0.25em;\n    font-weight: bolder;\n    color: #000e;\n    border: 0;\n    display: grid;\n    place-items: center;\n    height: 2em;\n    cursor: pointer;\n    box-shadow: 0 0.125em 0.25em hsla(40, 100%, 50%, 0.3);\n    transition: all 0.3s;\n}\n\nbutton:active {\n    box-shadow: 0 0 0.125em hsla(50, 100%, 50%, 0.4);\n    transform: translateY(0.125em);\n}\n\na,\na:visited {\n    color: rgb(103, 153, 238);\n}\n\n#splash-screen {\n    transition: all 0.9s;\n}\n\n#splash-screen.vanish {\n    pointer-events: none;\n    opacity: 0;\n}\n",""]);const s=i},587:(e,n,r)=>{var t=r(893),o=r(745),a=r(294),i=function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,a=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)i.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};const s=function(){function e(n,r){var t;this.storage=r,this.listeners=new Set,this.sessionId="AtomicState:".concat((e.counter++).toString(16),"\r"),this.currentValue=n,this.id="AtomicState\n".concat(null!==(t=null==r?void 0:r.id)&&void 0!==t?t:""),r?this.loadFromStorage():this.restoreSession()}return Object.defineProperty(e.prototype,"value",{get:function(){return this.currentValue},set:function(e){var n,r;if(e!==this.currentValue){this.currentValue=e,this.storage?window.localStorage.setItem(this.id,JSON.stringify(e)):this.saveSession(e);try{for(var t=function(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],t=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.listeners),o=t.next();!o.done;o=t.next())(0,o.value)(e)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=t.return)&&r.call(t)}finally{if(n)throw n.error}}}},enumerable:!1,configurable:!0}),e.prototype.useValue=function(){var e=this,n=i(a.useState(this.currentValue),2),r=n[0],t=n[1];return a.useEffect((function(){var n=function(e){console.log("ðŸš€ [atomic-state] v = ",e),t(e)};return e.listeners.add(n),function(){e.listeners.delete(n)}}),[]),r},e.prototype.useState=function(){var e=this,n=i(a.useState(this.currentValue),2),r=n[0],t=n[1];return a.useEffect((function(){return e.listeners.add(t),function(){e.listeners.delete(t)}}),[]),[r,function(n){e.value=n}]},e.prototype.loadFromStorage=function(){var e=this.storage;if(e)try{var n=window.localStorage.getItem(this.id);if(!n)return;var r=JSON.parse(n);if(!e.guard(r))throw Error("Invalid type!");this.currentValue=r}catch(n){console.error('Unable to retrieve AtomicState "'.concat(e.id,'":'),n)}},e.prototype.saveSession=function(e){var n=JSON.stringify(e),r=c(n);window.sessionStorage.setItem(this.sessionId,"".concat(r).concat(n))},e.prototype.restoreSession=function(){var e=window.sessionStorage.getItem(this.sessionId);if(e){var n=e.substring(0,16),r=e.substring(16);if(c(r)===n)try{var t=JSON.parse(r);this.value=t}catch(e){console.error("Atomic state is an invalid JSON!",this.sessionId)}else console.error("Atomic state has been corrupted!",this.sessionId)}},e.counter=0,e}();var l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function c(e){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<e.length;r++){var t=e.charCodeAt(r);n[r%n.length]+=t}return n.map((function(e){return l[e%l.length]})).join("")}const h={exercice:new s("Challenge"),proposalFragShader:new s("",{id:"proposalFragShader",guard:function(e){return"string"==typeof e}}),solutionFragShader:new s("")};var u=function(e,n,r,t){return new(r||(r=Promise))((function(o,a){function i(e){try{l(t.next(e))}catch(e){a(e)}}function s(e){try{l(t.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,s)}l((t=t.apply(e,n||[])).next())}))},d=function(e,n){var r,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&s[0]?t.return:s[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,s[1])).done)return o;switch(t=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,t=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],t=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},f=function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,a=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)i.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};function p(e){return u(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:return[4,n.sent().arrayBuffer()];case 2:return[2,n.sent()]}}))}))}function m(e,n,r){var t=e.createShader(r);if(!t)throw"Invalid shader type: ".concat(r,"!");if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(t);throw e.deleteShader(t),o}return t}var v=function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,a=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)i.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},g=.5,x=1e-6,b=255,y=1/6,j=1/15,w=1/99,A=1/b,T=/^RGB[\s(?:]+(?:[0-9]+)[^0-9]+(?:[0-9]+)[^0-9]+(?:[0-9]+)/u,E=/^RGBA[\s(?:]+(?:[0-9]+)[^0-9]+(?:[0-9]+)[^0-9]+(?:[0-9]+)[^0-9.]+(?:[0-9.]+)/u,S=/^HSL[\s(?:]+(?:[0-9]+)[^0-9]+(?:[0-9]+)[^0-9]+(?:[0-9]+)/u,R=function(){function e(n){void 0===n&&(n="#000000"),this.R=0,this.G=0,this.B=0,this.H=0,this.S=0,this.L=0,this.A=1,e.isValid(n)&&this.parse(n)}return e.fromColorOrString=function(n){return n?n instanceof e?n:new e(n):e.newBlack()},e.fromArrayRGB=function(n){if(!Array.isArray(n))return console.error("Invalid param rgb: ",n),e.fromRGB(0,0,0);for(;n.length<3;)n.push(0);var r=v(n,3),t=r[0],o=r[1],a=r[2];return e.fromRGB(t,o,a)},e.fromArrayRGBA=function(n){if(!Array.isArray(n))return console.error("Invalid param rgba: ",n),e.fromRGB(0,0,0);for(;n.length<4;)n.push(1);var r=v(n,4),t=r[0],o=r[1],a=r[2],i=r[3];return e.fromRGBA(t,o,a,i)},e.fromHSL=function(n,r,t){var o,a=new e;return a.H=(o=n)<0?o+Math.ceil(-o):o<1?o:o-Math.floor(o),a.S=N(r),a.L=N(t),a.hsl2rgb(),a},e.fromHSLA=function(n,r,t,o){var a=new e;return a.H=n,a.S=r,a.L=t,a.hsl2rgb(),a.A=o,a},e.isValid=function(e){if("string"!=typeof e)return!1;if("#"!==e.charAt(0))return!1;switch(e.length){case"#RGB".length:case"#RGBA".length:case"#RRGGBB".length:case"#RRGGBBAA".length:return!0;default:return!1}},e.contrast=function(n,r){var t=e.fromColorOrString(n),o=e.fromColorOrString(r),a=e.mix(t,o,o.A),i=t.luminance(),s=a.luminance(),l=.05;return i>s?(i+l)/(s+l):(s+l)/(i+l)},e.bestContrast=function(n){for(var r,t,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var i=e.fromColorOrString(n),s=0,l=-1,c=0;try{for(var h=function(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],t=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),u=h.next();!u.done;u=h.next()){var d=u.value,f=e.contrast(i,d);f>s&&(s=f,l=c),c++}}catch(e){r={error:e}}finally{try{u&&!u.done&&(t=h.return)&&t.call(h)}finally{if(r)throw r.error}}return o[l]},e.luminance=function(n){return void 0===n?0:e.fromColorOrString(n).luminance()},e.luminanceStep=function(n){if(!e.isValid(n))return-1;var r=e.luminance(n),t=.05;return(r+t)/t>1.05/(r+t)?1:0},e.isDarkColor=function(n){return 0===e.luminanceStep(n)},e.isLightColor=function(n){return 1===e.luminanceStep(n)},e.makeDarker=function(n,r){if(void 0===r&&(r=g),r<=0)return new e("#000");var t=e.fromColorOrString(n);return r>=1?t:e.fromHSLA(t.H,t.S,t.L,t.A*r)},e.makeHueRotated=function(n,r){void 0===r&&(r=g);var t=e.fromColorOrString(n);return t.rgb2hsl(),t.H+=r-Math.floor(r),t.H>1&&t.H--,t.hsl2rgb(),t},e.makeTransparent=function(n,r){var t=e.fromColorOrString(n);return t.A=N(r),t},e.mix=function(n,r,t){void 0===t&&(t=g);var o=e.fromColorOrString(n),a=e.fromColorOrString(r),i=1-t;return e.fromRGBA(t*a.R+i*o.R,t*a.G+i*o.G,t*a.B+i*o.B,t*a.A+i*o.A)},e.newBlack=function(){return e.fromRGB(0,0,0)},e.newWhite=function(){return e.fromRGB(1,1,1)},e.fromRGB=function(n,r,t){var o=new e;return o.R=n,o.G=r,o.B=t,o.A=1,o},e.fromRGBA=function(n,r,t,o){var a=new e;return a.R=n,a.G=r,a.B=t,a.A=o,a},e.normalize=function(n){return new e(n).stringify()},e.interpolate=function(n,r){if(r<1)return[];for(var t=n.map((function(n){return"string"==typeof n?new e(n):n})),o=[],a=1;a<=r;a++){var i=a/(r+1);o.push(e.ramp(t,i))}return o},e.ramp=function(n,r){if(void 0===r&&(r=g),0===n.length)return e.newBlack();if(1===n.length)return n[0];var t=n.length-1,o=Math.floor(r*t),a=n[o];if(o===t)return a;var i=n[o+1],s=r*t-o;return e.mix(a,i,s)},e.prototype.copy=function(){var n=new e;return n.R=this.R,n.G=this.G,n.B=this.B,n.A=this.A,n.H=this.H,n.S=this.S,n.L=this.L,n},e.prototype.hsl2rgb=function(){var e=6*this.H,n=this.S,r=this.L,t=(1-Math.abs(r+r-1))*n,o=function(e,n){var r=0,t=0,o=0,a=n*(1-Math.abs(e%2-1));return e<3?e<1?(r=n,t=a,o=0):e<2?(r=a,t=n,o=0):(r=0,t=n,o=a):e<4?(r=0,t=a,o=n):e<5?(r=a,t=0,o=n):(r=n,t=0,o=a),{R:r,G:t,B:o}}(e,t),a=o.R,i=o.G,s=o.B,l=r-t*g;this.R=a+l,this.G=i+l,this.B=s+l},e.prototype.luminance=function(){var e=this,n=e.R,r=e.G,t=e.B,o=.03928,a=.07739938080495357,i=.055,s=.9478672985781991;return.2126*(n<o?n*a:Math.pow((n+i)*s,2.4))+.7152*(r<o?n*a:Math.pow((r+i)*s,2.4))+.0722*(t<o?n*a:Math.pow((t+i)*s,2.4))},e.prototype.luminanceStep=function(){return this.luminance()<.62?0:1},e.prototype.parse=function(e){void 0===e&&(e="#000000");var n=e.trim().toUpperCase();return!!(this.parseHexa(n)||this.parseRGB(n)||this.parseRGBA(n)||this.parseHSL(n))},e.prototype.rgb2hsl=function(){var e=this.R,n=this.G,r=this.B,t=Math.min(e,n,r),o=Math.max(e,n,r),a=o-t;this.L=g*(o+t),a<x?(this.H=0,this.S=0):(this.S=a/(1-Math.abs(this.L+this.L-1)),this.H=o===e?n>=r?y*((n-r)/a):y*((r-n)/a):o===n?y*(2+(r-e)/a):y*(4+(e-n)/a))},e.prototype.stringify=function(){var e=k(this.R*b)+k(this.G*b)+k(this.B*b);this.A<1&&(e+=k(this.A*b));for(var n=!0,r=0;r<e.length;r+=2)if(e.charAt(r)!==e.charAt(r+1)){n=!1;break}return n&&(e=6===e.length?e.charAt(0)+e.charAt(2)+e.charAt(4):e.charAt(0)+e.charAt(2)+e.charAt(4)+e.charAt(6)),"#".concat(e)},e.prototype.toArrayRGB=function(){return[this.R,this.G,this.B]},e.prototype.toArrayRGBA=function(){return[this.R,this.G,this.B,this.A]},e.prototype.parseHexa=function(e){if("#"!==e.charAt(0))return!1;var n=0,r=0,t=0,o=1;switch(e.length){case"#fff".length:n=parseInt(e.charAt(1),16)*j,r=parseInt(e.charAt(2),16)*j,t=parseInt(e.charAt(3),16)*j;break;case"#fff7".length:n=parseInt(e.charAt(1),16)*j,r=parseInt(e.charAt(2),16)*j,t=parseInt(e.charAt(3),16)*j,o=parseInt(e.charAt(4),16)*j;break;case"#ffffff".length:n=parseInt(e.substr(1,2),16)*A,r=parseInt(e.substr(3,2),16)*A,t=parseInt(e.substr(5,2),16)*A;break;case"#ffffff77".length:n=parseInt(e.substr(1,2),16)*A,r=parseInt(e.substr(3,2),16)*A,t=parseInt(e.substr(5,2),16)*A,o=parseInt(e.substr(7,2),16)*A}return isNaN(n)||isNaN(r)||isNaN(t)||isNaN(o)?(this.R=0,this.G=0,this.B=0,this.A=0):(this.R=n,this.G=r,this.B=t,this.A=o),!0},e.prototype.parseHSL=function(e){var n=S.exec(e);return!!n&&(this.H=N(.002785515320334262*parseInt(n[1],10)),this.S=N(parseInt(n[2],10)*w),this.L=N(parseInt(n[3],10)*w),this.A=1,this.hsl2rgb(),!0)},e.prototype.parseRGB=function(e){var n=T.exec(e);return!!n&&(this.R=N(parseInt(n[1],10)*A),this.G=N(parseInt(n[2],10)*A),this.B=N(parseInt(n[3],10)*A),this.A=1,!0)},e.prototype.parseRGBA=function(e){var n=E.exec(e);return!!n&&(this.R=N(parseInt(n[1],10)*A),this.G=N(parseInt(n[2],10)*A),this.B=N(parseInt(n[3],10)*A),this.A=N(parseFloat(n[4])),!0)},e}();const F=R;function N(e){return Math.min(1,Math.max(0,e))}var C=16;function k(e){var n=Math.min(Math.max(Math.floor(e+x),0),b).toString(C);return n.length<"FF".length&&(n="0".concat(n)),n}var I=function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,a=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)i.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},U=function(e,n,r){if(r||2===arguments.length)for(var t,o=0,a=n.length;o<a;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))};function B(e){return Math.floor(255*e)}function O(e){var n=new F("#f90");return n.rgb2hsl(),n.H+=e/10,n.hsl2rgb(),[B(n.R),B(n.G),B(n.B),255]}const P=function(){function e(e,n,r,t){this.canvas=e;var o=e.getContext("webgl2");if(!o)throw Error("Unable to create WebGL2 context!");this.gl=o,this.elementCount=n.length,console.log("ðŸš€ [painter] this.elementCount = ",this.elementCount),this.prg=function(e,n){var r=e.createProgram();if(!r)throw"Unable to create Program!";if(e.attachShader(r,function(e,n){try{return m(e,n,e.VERTEX_SHADER)}catch(e){throw console.info(n),"Unable to compile VERTEX shader: ".concat(e)}}(e,n.vert)),e.attachShader(r,function(e,n){try{return m(e,n,e.FRAGMENT_SHADER)}catch(e){throw console.info(n),"Unable to compile FRAGMENT shader: ".concat(e)}}(e,n.frag)),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw"Unable to link the shader program: ".concat(e.getProgramInfoLog(r));return r}(o,{vert:"#version 300 es\n\nuniform float uniTime;\nin vec3 attPoint;\nin vec3 attNormal;\nin vec2 attUV;\nout vec3 varNormal;\nout float varDistance;\nout float varDendrite;\nout float varTime;\nout vec4 varPosition;\n\nconst float INV_XY = 1.0 / 50.0;\nconst float INV_Z = 1.0 / 250.0;\n\nvoid main() {\n  varTime = uniTime * 0.001;\n  float angle = uniTime * 0.0001;\n  float C = cos(angle);\n  float S = sin(angle);\n  mat3 rotation = mat3(\n    C, 0.0, -S,\n    0.0, 1.0, 0.0,\n    S, 0.0, C\n  );\n  varNormal = rotation * attNormal;\n  varDistance = attUV.x;\n  varDendrite = attUV.y;\n  vec3 point = rotation * attPoint * vec3(INV_XY, INV_XY, INV_Z);\n  float x = point.x;\n  float y = point.y;\n  float z = 0.5 * (1.0 + point.z);\n  gl_Position = vec4(x, y, z, z + 1.0);\n  varPosition = gl_Position;\n}",frag:L("#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D uniPalette;\nuniform sampler2D uniSimulation;\nin float varTime;\nin float varDistance;\nin float varDendrite;\nin vec3 varNormal;\nin vec4 varPosition;\nout vec4 FragColor;\n\nvoid adjustColor() {\n/*{{CODE}}*/\n}\n\nvoid main() {\n  vec3 normal = normalize(varNormal);\n  vec3 color = vec3(0.5, 0.5, 0.5);\n  float light = (normal.x * 0.5) + 1.0;\n  color *= light;\n  color += vec3(0.5, 0.5, 0.5) * (1.0 - abs(normal.z));\n  FragColor = vec4(color, 1.0);\n  adjustColor();\n  FragColor.a = 1.0;\n}",t)}),this.uniTime=this.getUniformLocation("uniTime"),this.uniPalette=this.getUniformLocation("uniPalette"),o.activeTexture(o.TEXTURE0),this.texPalette=function(e){var n=e.createTexture();if(!n)throw Error("Unable to create WebGL texture!");var r=U(U(U(U(U(U(U(U(U(U([],I([B(.85),B(.85),B(.85),255]),!1),I(O(0)),!1),I(O(1)),!1),I(O(2)),!1),I(O(3)),!1),I(O(4)),!1),I(O(5)),!1),I(O(6)),!1),I(O(7)),!1),I(O(8)),!1);return console.log("ðŸš€ [texture] colors = ",r),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,9,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(r)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_R,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),n}(o),this.uniSimulation=this.getUniformLocation("uniSimulation"),o.activeTexture(o.TEXTURE1),this.texSimulation=function(e){var n=e.createTexture();if(!n)throw Error("Unable to create WebGL texture!");for(var r=4096,t=new Uint8ClampedArray(10*r),o=1;o<10;o++)for(var a=0;a<64;a++)t[s=r*o+(i=Math.floor(Math.random()*r))]=255;for(var i=0;i<r;i++){var s=i;for(o=1;o<10;o++)t[r*o+i]>0&&(t[s]+=200)}for(s=0;s<r;s++){var l=t[s];l>0&&(t[(s+1)%r]=l>>1)}return e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.R8,r,10,0,e.RED,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_R,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),n}(o);var a=D(o);o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,a),o.bufferData(o.ELEMENT_ARRAY_BUFFER,n,o.STATIC_DRAW);var i=D(o);o.bindBuffer(o.ARRAY_BUFFER,i),o.bufferData(o.ARRAY_BUFFER,r,o.STATIC_DRAW),this.vao=function(e,n,r,t){var o=e.createVertexArray();if(!o)throw Error("Unable to create a WebGLVertexArrayObject!");e.bindVertexArray(o),e.bindBuffer(e.ARRAY_BUFFER,r);var a=e.getAttribLocation(n,"attPoint");e.enableVertexAttribArray(a),e.vertexAttribPointer(a,3,e.FLOAT,!1,32,0),e.vertexAttribDivisor(a,0);var i=e.getAttribLocation(n,"attNormal");e.enableVertexAttribArray(i),e.vertexAttribPointer(i,3,e.FLOAT,!1,32,12),e.vertexAttribDivisor(i,0);var s=e.getAttribLocation(n,"attUV");return e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,32,24),e.vertexAttribDivisor(s,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bindVertexArray(null),o}(o,this.prg,i,a),this.buffElem=a,this.buffVert=i}return e.prototype.paint=function(e){var n=this,r=n.gl,t=n.prg,o=n.vao,a=n.elementCount,i=n.canvas,s=n.uniTime,l=n.uniPalette,c=n.uniSimulation,h=i.clientWidth,u=i.clientHeight;i.width=h,i.height=u,r.viewport(0,0,h,u),r.useProgram(t),s&&r.uniform1f(s,e),l&&r.uniform1i(l,0),c&&r.uniform1i(c,1),r.clearColor(0,.1,.2,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.COLOR_BUFFER_BIT),r.enable(r.DEPTH_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),r.bindVertexArray(o),r.drawElements(r.TRIANGLES,a,r.UNSIGNED_SHORT,0),r.bindVertexArray(null)},e.prototype.cleanUp=function(){var e=this,n=e.gl,r=e.prg,t=e.vao,o=e.buffElem,a=e.buffVert,i=e.texPalette;n.deleteProgram(r),n.deleteVertexArray(t),n.deleteBuffer(o),n.deleteBuffer(a),n.deleteTexture(i)},e.prototype.getUniformLocation=function(e){return this.gl.getUniformLocation(this.prg,e)||(console.warn('Unable to find uniform "'.concat(e,'"!')),null)},e}();function D(e){var n=e.createBuffer();if(!n)throw Error("Unable to create a WebGL2 buffer!");return n}function L(e,n){return e.replace("/*{{CODE}}*/",n)}var _=r(379),G=r.n(_),M=r(795),H=r.n(M),V=r(569),X=r.n(V),Z=r(565),W=r.n(Z),Y=r(216),Q=r.n(Y),z=r(589),q=r.n(z),K=r(173),J={};J.styleTagTransform=q(),J.setAttributes=W(),J.insert=X().bind(null,"head"),J.domAPI=H(),J.insertStyleElement=Q(),G()(K.Z,J);const $=K.Z&&K.Z.locals?K.Z.locals:void 0;var ee=function(){return ee=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ee.apply(this,arguments)};function ne(e){return(0,t.jsx)("div",ee({className:(n=e,r=n.className,o=[$.Loading],r&&o.push(r),o.join(" "))},{children:"Loading..."}));var n,r,o}var re=r(390),te={};te.styleTagTransform=q(),te.setAttributes=W(),te.insert=X().bind(null,"head"),te.domAPI=H(),te.insertStyleElement=Q(),G()(re.Z,te);const oe=re.Z&&re.Z.locals?re.Z.locals:void 0;var ae=function(){return ae=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ae.apply(this,arguments)},ie=function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,a=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)i.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},se=function(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],t=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function le(e){var n=e.className,r=void 0===n?"":n,o=e.code,i=ie(function(){var e=f(a.useState(null),2),n=e[0],r=e[1],t=f(a.useState(null),2),o=t[0],i=t[1];return a.useEffect((function(){p("./data/elem.dat").then((function(e){return r(new Uint16Array(e))})).catch(console.error),p("./data/vert.dat").then((function(e){return i(new Float32Array(e))})).catch(console.error)}),[]),[n,o]}(),2),s=i[0],l=i[1],c=ie(a.useState(""),2),h=c[0],u=c[1],d=o.useValue(),m=a.useRef(null);return a.useEffect((function(){if(s&&l){var e=m.current;if(e){u("");try{var n=new P(e,s,l,d),r=!0,t=function(e){n.paint(e),r&&requestAnimationFrame(t)};return requestAnimationFrame(t),function(){r=!1,n.cleanUp()}}catch(e){console.log("ðŸš€ [Scene] ex = ",e),e instanceof Error?u(e.message):u("string"==typeof e?e:">>> ".concat(e," <<<"))}}}}),[s,l,m.current,d]),(0,t.jsxs)("div",ae({className:"".concat(r," ").concat(oe.Scene)},{children:[(0,t.jsx)(ne,{}),(0,t.jsx)("canvas",{ref:m,style:{opacity:s&&l?1:0}}),h&&(0,t.jsx)("div",ae({className:oe.error},{children:de(h,d)}))]}))}var ce=/^ERROR:[ \t]+[0-9]+:([0-9]+):[ \t]+/,he="Unable to compile FRAGMENT shader: ",ue=14;function de(e,n){var r,o,a=new Set,i=[],s=e.substring(he.length).trim().split("\n");try{for(var l=se(s),c=l.next();!c.done;c=l.next()){var h=c.value;ce.lastIndex=-1;var u=ce.exec(h.trim());if(u){var d=ie(u,2),f=d[0],p=d[1],m=parseInt(p);a.add(m-ue),i.push((0,t.jsxs)("li",{children:[(0,t.jsxs)("b",{children:["Line ",m-ue,":"]})," ",h.substring(f.length)]}))}else i.push(h)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}for(var v=n.split("\n"),g=[],x=0;x<v.length;x++)0!==(h=v[x]).trim().length&&g.push((0,t.jsx)("div",ae({className:a.has(x+1)?oe.highlight:""},{children:x+1})),(0,t.jsx)("pre",{children:h.trimEnd()}));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{children:"Your fragment code has bugs!"}),(0,t.jsx)("ul",{children:i}),(0,t.jsx)("br",{}),(0,t.jsx)("div",ae({className:oe.codeLines},{children:g}))]})}var fe=r(664),pe={};pe.styleTagTransform=q(),pe.setAttributes=W(),pe.insert=X().bind(null,"head"),pe.domAPI=H(),pe.insertStyleElement=Q(),G()(fe.Z,pe);const me=fe.Z&&fe.Z.locals?fe.Z.locals:void 0;var ve=r(755),ge={};ge.styleTagTransform=q(),ge.setAttributes=W(),ge.insert=X().bind(null,"head"),ge.domAPI=H(),ge.insertStyleElement=Q(),G()(ve.Z,ge);const xe=ve.Z&&ve.Z.locals?ve.Z.locals:void 0;var be=function(){return be=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},be.apply(this,arguments)},ye=function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,a=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)i.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};function je(e){var n=e.className,r=void 0===n?"":n,o=ye(h.proposalFragShader.useState(),2),i=o[0],s=o[1],l=ye(a.useState(i),2),c=l[0],u=l[1];return a.useEffect((function(){u(i)}),[i]),(0,t.jsxs)("div",be({className:"".concat(xe.Editor," ").concat(r)},{children:[(0,t.jsxs)("header",{children:[(0,t.jsx)("div",{children:"Your fragment code (Ctrl-Enter)"}),(0,t.jsx)("button",be({onClick:function(){return s(c)}},{children:"Evaluate"}))]}),(0,t.jsx)("textarea",{spellCheck:!1,value:c,onChange:function(e){return u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&e.ctrlKey&&s(c)}})]}))}var we=r(6),Ae={};Ae.styleTagTransform=q(),Ae.setAttributes=W(),Ae.insert=X().bind(null,"head"),Ae.domAPI=H(),Ae.insertStyleElement=Q(),G()(we.Z,Ae);const Te=we.Z&&we.Z.locals?we.Z.locals:void 0;function Ee(e){const n=Object.assign({h1:"h1",blockquote:"blockquote",p:"p",strong:"strong",ul:"ul",li:"li",code:"code",h2:"h2",pre:"pre"},e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{children:"Challenge"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["If you don't feel like you can tackle this challenge yet, try out the ",(0,t.jsx)(n.strong,{children:"Tutorial"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Your challenge is to display a prerecorded simulation of a Neuron electrical activity.\nYour result should match as much as possible with what you can see in the second animation."}),"\n",(0,t.jsx)(n.p,{children:"Here are the variables you may need:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"vec4 FragColor"}),": Color of the current pixel. You can modify it."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"float varTime"}),": The number of seconds elapses from the start of the animation."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"float varDistance"}),": Distance of the pixel to the soma. ",(0,t.jsx)(n.code,{children:"1.0"})," is the size of the longest dendrite."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"float varDendrite"}),": Which dendrite/doma this pixels belongs to.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"0.05"}),": Soma."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"0.15"}),": Dendrite #1."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"0.25"}),": Dendrite #2."]}),"\n",(0,t.jsx)(n.li,{children:"..."}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"0.95"}),": Dendrite #9."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You also have access to two textures: ",(0,t.jsx)(n.code,{children:"uniPalette"})," and ",(0,t.jsx)(n.code,{children:"uniSimulation"}),"."]}),"\n",(0,t.jsx)(n.h2,{children:"uniPalette"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"uniPalette"})," is a texture of dimension 1Ã—10 which maps a color to the soma and to each dendrites. Try this to see what we mean:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"FragColor *= texture(uniPalette, vec2(0, varDendrite));\n"})}),"\n",(0,t.jsx)(n.h1,{children:"uniSimulation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"uniSimulation"})," is a texture of dimension 4096Ã—10.\nThe rows are mapped to a soma/dendrite in the same way ",(0,t.jsx)(n.code,{children:"uniPalette"})," is."]}),"\n",(0,t.jsx)(n.p,{children:"The cols represent the steps of the simulation.\nEach step is a unit of time and its value is the electrical potential of a spike."}),"\n",(0,t.jsxs)(n.p,{children:["Remember, that whatever dimension a texture has,\nthe coordinates to access it are always between ",(0,t.jsx)(n.code,{children:"0.0"})," and ",(0,t.jsx)(n.code,{children:"1.0"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"float zoom = 0.1;\nFragColor *= 0.1;\nFragColor += texture(\n  uniSimulation,\n  vec2(varDistance * zoom, varDendrite)\n);\n"})})]})}const Se=function(e={}){const{wrapper:n}=e.components||{};return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(Ee,e)})):Ee(e)};function Re(e){const n=Object.assign({h1:"h1",p:"p",h2:"h2",code:"code",br:"br",strong:"strong",pre:"pre",a:"a",em:"em",ul:"ul",li:"li"},e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{children:"Tutorial"}),"\n",(0,t.jsx)(n.p,{children:"In this virtual lab you will write the piece of code to visualize electic spikes running along this neuron's dendrites."}),"\n",(0,t.jsx)(n.h2,{children:"Applying a flat color"}),"\n",(0,t.jsxs)(n.p,{children:["The code you write will be called for every displayed pixel of the scene. The color of this pixel is stored in this variable: ",(0,t.jsx)(n.code,{children:"FragColor"}),".",(0,t.jsx)(n.br,{}),"\n","It's a four dimensional vector and its components are called ",(0,t.jsx)(n.strong,{children:"red"}),", ",(0,t.jsx)(n.strong,{children:"green"}),", ",(0,t.jsx)(n.strong,{children:"blue"})," and ",(0,t.jsx)(n.strong,{children:"alpha"}),". They all are float numbers between ",(0,t.jsx)(n.code,{children:"0.0"})," and ",(0,t.jsx)(n.code,{children:"1.1"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["For all the exercices, you will need to set ",(0,t.jsx)(n.strong,{children:"alpha"})," to ",(0,t.jsx)(n.code,{children:"1.0"})," (meaning full opacity)."]}),"\n",(0,t.jsx)(n.p,{children:"So let try this code (double click it):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"FragColor = vec4(1, 0.7, 0, 1);\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Applying a tint"}),"\n",(0,t.jsx)(n.p,{children:"The result has lost all shading. So the neuron does not look 3D anymore. This is because you told the renderer that all visible pixels must be orange."}),"\n",(0,t.jsxs)(n.p,{children:["But ",(0,t.jsx)(n.code,{children:"FragColor"})," already had a color before you changed it. You can see it in the second rotating neuron scene.\nSo we can just alterate this existing color to add it an orange tint. Try this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"FragColor = FragColor * vec4(1, 0.7, 0, 1);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Which can be simplified by this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"FragColor *= vec4(1, 0.7, 0, 1);\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Time variation"}),"\n",(0,t.jsxs)(n.p,{children:["The current time if hold in the variable ",(0,t.jsx)(n.code,{children:"varTime"}),". It is expressed in seconds since the start of the animation.\nYou can use time to animate colors. Try this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"float red = abs(cos(varTime));\nfloat green = abs(cos(varTime + 0.3));\nfloat blue = abs(cos(varTime + 0.7));\nFragColor *= vec4(red, green, blue, 1);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, we are using two new functions:\n",(0,t.jsx)(n.a,{href:"https://www.khronos.org/opengles/sdk/docs/manglsl/docbook4/xhtml/abs.xml",children:"abs"}),"\nand\n",(0,t.jsx)(n.a,{href:"https://www.khronos.org/opengles/sdk/docs/manglsl/docbook4/xhtml/cos.xml",children:"cos"})]}),"\n",(0,t.jsxs)(n.p,{children:["The code is written in GLSL which comes with plenty of\n",(0,t.jsx)(n.a,{href:"https://www.khronos.org/opengles/sdk/docs/manglsl/docbook4/",children:"mathematical functions"}),"."]}),"\n",(0,t.jsx)(n.h2,{children:"Along the dendrites"}),"\n",(0,t.jsxs)(n.p,{children:["The variable ",(0,t.jsx)(n.code,{children:"varDistance"})," tells you if the pixel is at the tip of a dendrite (",(0,t.jsx)(n.code,{children:"varDistance == 0.0"}),")\nor at the soma (",(0,t.jsx)(n.code,{children:"varDistance == 1.0"}),"). Try this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"FragColor *= 1.0 - varDistance;\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can use mathematical functions to have moving stripes\nalong the dendrites:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"float stripesCount = 6.0;\nfloat PI = 3.141592653589793;\nfloat TAU = 2.0 * PI;\nvec4 BLUE = vec4(0, 0.2, 1, 1);\nvec4 ORANGE = vec4(1, 0.7, 0, 1);\nfloat angle = (stripesCount * TAU * varDistance);\nfloat intensity = abs(cos(angle));\nFragColor = mix(ORANGE, BLUE, intensity);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here we use the ",(0,t.jsx)(n.a,{href:"https://www.khronos.org/opengles/sdk/docs/manglsl/docbook4/xhtml/mix.xml",children:"mix"}),"\nfunction that will perform a linear interpolation between ORANGE and BLUE."]}),"\n",(0,t.jsx)(n.h2,{children:"Syntaxical tricks"}),"\n",(0,t.jsx)(n.p,{children:"Here is an example of how you can use ternary operators and vectors aggregation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"vec3 BLUE = vec3(0, 0.7, 1);\nvec3 ORANGE = vec3(1, 0.7, 0);\n\nFragColor *= vec4(\n  varDistance > 0.5 ? BLUE : ORANGE,\n  1\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Ternary operator have this form: ",(0,t.jsx)(n.em,{children:"condition"})," ",(0,t.jsx)(n.code,{children:"?"})," ",(0,t.jsx)(n.em,{children:"value if true"})," ",(0,t.jsx)(n.code,{children:":"})," ",(0,t.jsx)(n.em,{children:"value if false"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["So if ",(0,t.jsx)(n.code,{children:"varDistance"})," is greater than ",(0,t.jsx)(n.code,{children:"0.5"}),", the last instruction will be\nequivalent to ",(0,t.jsx)(n.code,{children:"FragColor *= vec4( BLUE, 1 );"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["You can see that ",(0,t.jsx)(n.code,{children:"vec4()"})," has only 2 arguments here. But that's accepted\nbecause the first one in a vector or dimension 3."]}),"\n",(0,t.jsx)(n.h2,{children:"Reading data from texture"}),"\n",(0,t.jsx)(n.p,{children:"The neuron we are intersted in has 8 dendrites coming out from the soma."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"vec4 color = texture(uniPalette, vec2(0, varDendrite));\nFragColor *= color;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"uniPalette"})," is a 1Ã—10 image, each pixel represents the color of the soma and the 9 dendrites.\n",(0,t.jsx)(n.code,{children:"texture()"})," is the function to get the color from a texture. The second argument is a\ntwo-dimensional vector that hpld the X and Y coordinates of what you want to pick up.\n",(0,t.jsx)(n.code,{children:"vec2(0, 0)"})," is the top/left corner and ",(0,t.jsx)(n.code,{children:"vec2(1,1)"})," is the bottom/right one."]}),"\n",(0,t.jsx)(n.p,{children:"Here is an example where we rotate the colors every second:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"float y = mod(varDendrite + varTime * 0.1, 1.0);\nvec4 color = texture(uniPalette, vec2(0, y));\nFragColor *= color;\n"})}),"\n",(0,t.jsx)(n.p,{children:"And you can also have smoother transitions between dendrites and soma colors:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"vec4 soma = texture(uniPalette, vec2(0, 0));\nvec4 color = texture(uniPalette, vec2(0, varDendrite));\nfloat t = varDistance;\nFragColor *= mix(color, soma, t);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Or even go further by using the ",(0,t.jsx)(n.a,{href:"https://www.khronos.org/opengles/sdk/docs/manglsl/docbook4/xhtml/smoothstep.xml",children:(0,t.jsx)(n.code,{children:"smoothstep()"})})," function:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-glsl",children:"vec4 soma = texture(uniPalette, vec2(0, 0));\nvec4 color = texture(uniPalette, vec2(0, varDendrite));\nfloat t = smoothstep(0.9, 0.99, varDistance);\nFragColor *= mix(color, soma, t);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"smoothstep"})," here means that:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["when ",(0,t.jsx)(n.code,{children:"varDistance"})," is lower than ",(0,t.jsx)(n.code,{children:"0.90"}),", then ",(0,t.jsx)(n.code,{children:"t"})," will be ",(0,t.jsx)(n.code,{children:"0.0"}),","]}),"\n",(0,t.jsxs)(n.li,{children:["when ",(0,t.jsx)(n.code,{children:"varDistance"})," is greater than ",(0,t.jsx)(n.code,{children:"0.99"}),", then ",(0,t.jsx)(n.code,{children:"t"})," will be ",(0,t.jsx)(n.code,{children:"1.0"}),","]}),"\n",(0,t.jsxs)(n.li,{children:["and in between, ",(0,t.jsx)(n.code,{children:"t"})," will be smoothed using a cubic interpolation."]}),"\n"]})]})}const Fe=function(e={}){const{wrapper:n}=e.components||{};return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(Re,e)})):Re(e)};var Ne=function(){return Ne=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Ne.apply(this,arguments)},Ce=function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,a=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)i.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},ke=function(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],t=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ie(e){var n=e.className,r=Ce(h.exercice.useState(),2),o=r[0],i=r[1],s=a.useRef(null);a.useEffect((function(){var e=s.current;e&&function(e){var n,r;if(e){var t=e.querySelectorAll("pre > code.language-glsl"),o=function(e){var n=e.parentElement;if(!n)return"continue";n.classList.add(Te.Code),n.setAttribute("title","Double-click to copy"),n.addEventListener("dblclick",(function(){var e;return h.proposalFragShader.value=null!==(e=n.textContent)&&void 0!==e?e:""}))};try{for(var a=ke(t),i=a.next();!i.done;i=a.next())o(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}(e)}),[s.current]),a.useEffect((function(){var e;h.solutionFragShader.value=null!==(e=Ue[o])&&void 0!==e?e:""}),[o]);var l={Challenge:(0,t.jsx)(Se,{}),Tutorial:(0,t.jsx)(Fe,{})};return(0,t.jsxs)("div",Ne({className:[Te.Exercices,n].join(" "),ref:s},{children:[(0,t.jsx)("header",{children:Object.keys(l).map((function(e){return(0,t.jsx)("button",Ne({disabled:e===o,onClick:function(){return i(e)}},{children:e}))}))}),(0,t.jsx)("main",{children:l[o]})]}))}var Ue={Challenge:"float t = varTime;\nfloat x = (t - varDistance) * 0.001;\nfloat y = varDendrite;\nfloat w = texture(uniSimulation, vec2(x, y)).r;\nFragColor *= 0.5;\nFragColor += w * texture(uniPalette, vec2(0, y));\n"},Be=function(){return Be=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Be.apply(this,arguments)};function Oe(e){return(0,t.jsxs)("div",Be({className:(n=e,r=n.className,o=[me.App],r&&o.push(r),o.join(" "))},{children:[(0,t.jsx)(le,{className:me.canvas,code:h.proposalFragShader}),(0,t.jsx)(le,{className:me.canvas,code:h.solutionFragShader}),(0,t.jsx)(je,{className:me.editor}),(0,t.jsx)(Ie,{})]}));var n,r,o}var Pe=r(719),De={};De.styleTagTransform=q(),De.setAttributes=W(),De.insert=X().bind(null,"head"),De.domAPI=H(),De.insertStyleElement=Q(),G()(Pe.Z,De),Pe.Z&&Pe.Z.locals&&Pe.Z.locals,function(){var e=document.getElementById("root");(0,o.s)(e).render((0,t.jsx)(Oe,{}));var n=new Image;n.src="background.jpg",n.onload=function(){var e=document.getElementById("splash-screen");e&&(e.classList.add("vanish"),window.setTimeout((function(){var n;null===(n=e.parentNode)||void 0===n||n.removeChild(e)}),1e3))}}()},734:(e,n,r)=>{e.exports=r.p+"img/error.e7cfa4601e9cbe69fa8c.jpg"}},r={};function t(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={id:e,exports:{}};return n[e](a,a.exports,t),a.exports}t.m=n,e=[],t.O=(n,r,o,a)=>{if(!r){var i=1/0;for(h=0;h<e.length;h++){for(var[r,o,a]=e[h],s=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(t.O).every((e=>t.O[e](r[l])))?r.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(h--,1);var c=o();void 0!==c&&(n=c)}}return n}a=a||0;for(var h=e.length;h>0&&e[h-1][2]>a;h--)e[h]=e[h-1];e[h]=[r,o,a]},t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"})(),(()=>{t.b=document.baseURI||self.location.href;var e={143:0};t.O.j=n=>0===e[n];var n=(n,r)=>{var o,a,[i,s,l]=r,c=0;if(i.some((n=>0!==e[n]))){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(l)var h=l(t)}for(n&&n(r);c<i.length;c++)a=i[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(h)},r=self.webpackChunkwebgl2=self.webpackChunkwebgl2||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})(),t.nc=void 0;var o=t.O(void 0,[550],(()=>t(587)));o=t.O(o)})();